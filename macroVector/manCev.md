title:cevMacro.h
source:grauho 2025
section:3
volume:Macro Vector Header
date:2025-04-14

# NAME
cevMacro.h, Capable Enough Vectors 

# LIBRARY
#include "cevMacro.h"

# DESCRIPTION
This header contains three macros that are used to dynamically define a vector
data structure for a given type with a user provided suffix namespace. The
functions and structure definitions generated by these macros can either be
forced to be static or can be used to generate a more traditional pair of
translation unit and header if used separately in a .c and .h file 
respectively.

# SYNOPSYS
    #include <cevMacro.h>

    CEV_MACRO_PROTOTYPES(NAME, type);
    CEV_MACRO_DEFINITIONS(NAME, type);
    CEV_MACRO_COMPLETE(NAME, type);

    struct {NAME}Vector
    {
        CEV_USIZE len;
        CEV_USIZE max;
        {type} *data;
    }

    struct {NAME}Vector * {NAME}VectorInit(const CEV_USIZE init_len);
	struct {NAME}Vector * {NAME}VectorInitWithData(const {type} * const data, 
        const CEV_USIZE init_len);

	CEV_STAT {NAME}VectorPush(struct {NAME}Vector * const vec, {type} val);
	CEV_STAT {NAME}VectorPushBack(struct {NAME}Vector * const vec, {type} val);
	CEV_STAT {NAME}VectorPushMany(struct {NAME}Vector * const vec, 
        const {type} * const val_arr, const CEV_USIZE len);
	CEV_STAT {NAME}VectorPushBackMany(struct {NAME}Vector * const vec, 
        const {type} * const val_arr, const CEV_USIZE len);

	CEV_STAT {NAME}VectorInsert(struct {NAME}Vector * const vec, 
        const CEV_USIZE index, {type} val);
	CEV_STAT {NAME}VectorInsertMany(struct {NAME}Vector * const vec, 
        const CEV_USIZE index, const {type} * const val_arr, 
        const CEV_USIZE len);

	CEV_STAT {NAME}VectorReplace(struct {NAME}Vector * const vec, 
        const CEV_USIZE index, {type} new_val);
	CEV_STAT {NAME}VectorReplaceWithCallback(struct {NAME}Vector * const vec, 
        const CEV_USIZE index, {type} new_val, 
        void (*Callback)({type}, void *), void *user_data);

	CEV_STAT {NAME}VectorIndex(struct {NAME}Vector * const vec, 
        const CEV_USIZE index, {type} * const out)

	CEV_STAT {NAME}VectorPop(struct {NAME}Vector * const vec, 
        {type} * const out);
	CEV_STAT {NAME}VectorPopBack(struct {NAME}Vector * const vec, 
        {type} * const out);

	CEV_STAT {NAME}VectorPeek(struct {NAME}Vector * const vec, 
        {type} * const out);
	CEV_STAT {NAME}VectorPeekBack(struct {NAME}Vector * const vec, 
        {type} * const out);

	CEV_STAT {NAME}VectorRemove(struct {NAME}Vector * const vec, 
        const CEV_USIZE index);
	CEV_STAT {NAME}VectorRemoveMany( struct {NAME}Vector * const vec, 
        const CEV_USIZE index, const CEV_USIZE num);
	CEV_STAT {NAME}VectorRemoveWithCallback(struct {NAME}Vector * const vec,
        const CEV_USIZE index, void (*Callback)({type}, void *), 
        void *user_data);
	CEV_STAT {NAME}VectorRemoveManyWithCallback(
        struct {NAME}Vector * const vec, const CEV_USIZE index, 
        const CEV_USIZE num, void (*Callback)({type}, void *), 
        void *user_data);

	CEV_STAT {NAME}VectorLength(struct {NAME}Vector * const vec, 
        CEV_USIZE * const out);
	CEV_STAT {NAME}VectorTrim(struct {NAME}Vector * const vec);
	CEV_STAT {NAME}VectorExpand(struct {NAME}Vector * const vec);

	void {NAME}VectorFree(struct {NAME}Vector * const vec);
	void {NAME}VectorFreeWithCallback(struct {NAME}Vector * const vec, 
        void (*Callback)({type}, void *), void *user_data);

# DESCRIPTION
## CEV\_MACRO\_PROTOTYPES()
Defines the structure definition for the vector containing the data type
indicated by 'type' with the namespace 'NAME'. This can be used to generate
a header file without including the generated function definitions. Must be
followed by a semicolon.
## CEV\_MACRO\_DEFINITIONS()
Defines the generated function definitions to go with the aforementioned 
prototypes. This must be invoked after the prototypes function and have access
to the prototype's scope as that contains the structure definition. 'type' and
'NAME' __MUST MATCH__ those used in CEV\_MACRO\_PROTOTYPES. Must be followed
by a semicolon.
## CEV\_MACRO\_COMPLETE()
Defines the two above functions one after another, ensuring that the arguments
for both are consistent. Suitable for if using this library in only a single
file and an exernal header is not needed. Must be followed by a semicolon.
## {NAME}VectorInit()
Allocates a new vector of the generated type with an initial data array 
capacity correponding to the 'init\_len' argument. Returns NULL on failure.
## {NAME}VectorInitWithData()
Allocates a new vector of the generated type and populates its data array using
the 'val\_arr' array provided. The provided data array is also used as the 
initial capacity agrument. Returns NULL on failure.
## {NAME}VectorPush()
Appends the value provided by 'val' to the vector's, 'vec', internal data 
array. Vector is expanded if needed. Possible errors: CEV\_BADARGS, 
CEV\_FULLUP, or CEV\_ERRMEM 
## {NAME}VectorPushMany()
Appends 'len' number of values from 'val\_arr' to the end of the internal
data array, expanding the vector as needed. Possible errors: CEV\_BADARGS, 
CEV\_OOB, or CEV\_ERRMEM 
## {NAME}VectorPushBack()
As with {NAME}VectorPush but prepends the value to the vectors internal data
array instead of appending it. Possible errors are the same.
## {NAME}VectorPushBackMany()
As with {NAME}VectorPushMany but prepends the values to the vectors internal 
data array instead of appending them. Possible errors are the same.
## {NAME}VectorInsert()
Inserts the value, 'val', into the vector at index 'index'. The vector may
be expanded to accomdiate this new value if neccessary. index is zero based and
__MAY__ be equal to the length. Possible errors: CEV\_BADARGS, CEV\_OOB, 
CEV\_FULLUP, CEV\_ERRMEM.
## {NAME}VectorInsertMany()
As with {NAME}VectorInsert but instead 'num' values are taken from 'val\_arr'
and inserted starting at the index indicated by 'index'. The possible errors
are the same as {NAME}VectorInsert.
## {NAME}VectorReplace()
Replaces the value at index 'index' with the value 'new\_val'. Possible errors:
CEV\_BADARGS, CEV\_EMPTY, CEV\_OOB.
## {NAME}VectorReplaceWithCallback()
As with {NAME}VectorReplace but the callback 'Callback' is called with the
old item being replaced as its first argument. 'user\_data' is passed into the 
callback as its second argument. This is to allow for any deallocation or 
cleanup before the reference to the old item is invalidated. Possible error 
codes are the same as {NAME}VectorReplace.
## {NAME}VectorIndex()
Populates the variable 'out' of type {type} with the contents of the vector 
array at index 'index'. Possible errors: CEV\_BADARGS, CEV\_EMPTY, CEV\_OOB.
## {NAME}VectorPop()
Populates the variable 'out' of type {type} with the __front-most__ index 
variable in the vector before removing that item from the array. Possible 
errors: CEV\_BADARGS, CEV\_EMPTY
## {NAME}VectorPopBack()
Populates the variable 'out' of type {type} with the __back-most__ index 
variable in the vector before removing that item from the array. Possible 
errors: CEV\_BADARGS, CEV\_EMPTY
## {NAME}VectorPeek()
Populates the variable 'out' of type {type} with the __front-most__ index 
variable in the vector without removing that item. Possible errors: 
CEV\_BADARGS, CEV\_EMPTY
## {NAME}VectorPeekBack()
Populates the variable 'out' of type {type} with the __back-most__ index 
variable in the vector without removing that item. Possible errors: 
CEV\_BADARGS, CEV\_EMPTY
## {NAME}VectorRemove()
Removes the item at index 'index' from the vector. Possible errors: 
CEV\_BADARGS, CEV\_EMPTY, CEV\_OOB.
## {NAME}VectorRemoveMany()
Removes 'num' items from the vector starting at the position indicated by 
'index'. The entire range of this removal process must be within the valid 
bounds of the vector. Possible errors: CEV\_BADARGS, CEV\_EMPTY, CEV\_OOB.
## {NAME}VectorRemoveWithCallback()
As with {NAME}VectorRemove but the callback 'Callback' is first called on the
item to be removed as its first argument and 'user\_data' as its second 
argument. Possible errors are the same.
## {NAME}VectorRemoveManyWithCallback()
As with {NAME}VectorRemoveMany but the callback 'Callback' is first called on 
the item to be removed as its first argument and 'user\_data' as its second 
argument. Possible errors are the same.
## {NAME}VectorLength()
Returns the current in use length of the vector in the 'out' variable. Possible
errors: CEV\_BADARGS.
## {NAME}VectorTrim()
Removes the unused extra capacity from the vector. Does not affect the in-use
length. Possible errors: CEV\_BADARGS, CEV\_ERRMEM
## {NAME}VectorFree()
Frees the vector, does not return anything. No-op if called with vector equal
to NULL.
## {NAME}VectorFreeWithCallback()
Frees the vector but first calls the callback 'Callback' on each item in the
vector with that item as the first argument and 'user\_data' as the second. 
This can be useful for freeing dynamically allocated memory before the 
reference is lost with the vector. 
## {NAME}VectorExpand()
Used internally but may be called externally should one want to expand the 
vector's maximum capacity manually. 
## Callback Function
The first argument is the value which is about to be deleted or replaced and 
the second is a void pointer that is passed into the calling function to allow
the end user to pass through any state they may need. The callback function
returns void.

# RETURN STATUS
Most functions generated by this library return a CEV\_STAT variable. All
functions that return a CEV\_STAT variable return CEV\_SUCCESS on succesful 
execution. The user should use the conditions '(status != CEV\_SUCCESS)' to 
check for failure as CEV\_FAILURE is only returned when no other more 
descriptive status is available. Negative values for CEV\_STAT should be 
treated as fatal errors, usually relating to allocation failures. See the 
ERRORS section for a more descriptive explaination of the possible status 
codes. 

# ERRORS
## CEV\_SUCCESS: 
Successful function execution, defined as 0.
## CEV\_FAILURE: 
A generic non-fatal error status code. __UNUSED__
## CEV\_BADARGS: 
The arguments provided to the function are not valid. Usually this is because 
something is NULL when it is required not to be.
## CEV\_NEXISTS: 
Item in question does not exists. __UNUSED__
## CEV\_EXISTS:  
Item in question already exists. __UNUSED__
## CEV\_EMPTY:   
The vector is empty, used primarially in access functions. Takes precedence
over the CEV\_OOB status.
## CEV\_OOB:     
The requested index is out of the in-use bounds for the vector. 
## CEV\_FULLUP:  
The vector has been expanded to its maximum allowed size. This is determined
by CEV\_UMAX. If redefining CEV\_USIZE and its related quantities note that
CEV\_UMAX may be defined as less than the corresponding limit for the 
underlying data type if desired.
## CEV\_ERRMEM:  
A fatal memory allocation related error. If defining custom memory allocation
functions this status code should be returned when allocation fails. 
## CEV\_ERRGEN:  
A general fatal error. __UNUSED__

# ENVIRONMENT
When compiling the following compile time definitions can be made to overwrite
default library behavior. Each of the constituent macros must be defined if
using one of these overwrites:
## CEV\_MACRO\_CUSTOM\_ALLOC: 
Overwrites default definitions for CEV\_MALLOC, CEV\_CALLOC, CEV\_REALLOC, and 
CEV\_FREE. Doing so removes the dependency on stdlib.h.
## CEV\_MACRO\_CUSTOM\_MEMMOVE: 
Overwrites default definitions for CEV\_MEMMOVE, and CEV\_MEMCOPY. Doing so 
removes the dependency on string.h. These are used internally for memory 
manipulation.
## CEV\_MACRO\_CUSTOM\_USIZE: 
Overwrites default definitions for CEV\_USIZE, CEV\_UMAX, and CEV\_UESC. Doing 
so removes the dependency on limits.h. These determine the maximum index of the 
vector. CEV\_USIZE __MUST BE UNSIGNED__

# VERSIONS
0.0.1

# STANDARDS
C89/90

# NOTES
Notes

# CAVEATS

# BUGS
YES

# EXAMPLES

# AUTHORS
    Grauho <grauho@proton.me> 

# REPORTING BUGS
/dev/null

# COPYRIGHT
Copyright (c) Grauho 2025, All Rights Reserved 

# SEE ALSO
